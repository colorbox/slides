
# とあるプロジェクト108日間の記録

@color_box

---

### @color_box

Twitter: @color_box
GitHub:  @colorbox

---

### 話すこと

108日ほどリーダーとして動いたプロジェクトについて

エンジニア*4名

---

### プロジェクトの大まかな流れ
プロジェクトの始動
最初の見積もり
開発
トラブル
開発完了

---

### プロジェクトの始動、仕様の誕生
新たなる仕様
企画の仕様が大雑把に策定され、エンジニアに共有される

---

### 最初の見積もり
納期をほどほどの確度で出すための見積もりを行う

---

### 見積もり
仕様書の機能を全部見積もり、それに掛かる時間を算出する

---

### ユーザーストーリー
仕様(フィーチャ)をそのまま見積もりのは難しい
見積もりやすい単位(ユーザーストーリー)に分解する
仕様をユーザーストーリーの集合に分解する

---

### ユーザーストーリー
ユーザーストーリーは概ね「Aとして、Bをしたい、なぜならCだからだ」
という形式にする。
作成すべき機能が明確で、見積もりがしやすくなる

---

### ユーザーストーリー
例えば
「ユーザーは日記事を投稿して一覧できる機能」
という仕様は

---

### ユーザーストーリー
「ユーザーとして自分の投稿した日記を一覧したい、なぜなら自分が何を投稿したか見たいからだ」
「ユーザーとして日記を投稿したい、なぜならその日の記録をつけたいからだ」
「ユーザーとして日記を修正したい、なぜなら間違いを見つけたからだ」
というストーリーに分解する

---

### 見積もり
見積もりはプラニングポーカーで、相対ポイントで見積もる。

全ての仕様を分解したユーザーストーリーがあって、それに対する見積もりがあれば、プロジェクトの規模がわかる
過去のチーム実績から、その規模の実装に必要な時間も大雑把に把握可能

---

### 見積もり
仕様書に全ての情報は載っていない
見積もりをおこなう中で、不明点が見つかる
不明点はPOに質問
質問の回答を元にさらに見積もる

見積もり→質問→見積もり
この繰り返し

---

### 仕様の削ぎ落とし
必要最低限を残して、可能な限り仕様を削ぎ落とす
「できれば入れたい」
「余裕があれば入れたい」
などのWANT系は削ぎ落とす

---

### 仕様の削ぎ落とし
仕様書を見た時点で、規模が大きくなることは明白
多くの実装が必要になると後々辛い
最初に落とせるものは落とす判断

---

### 初期見積もりの終わり
見えている範囲で全ての仕様を分解し、その見積もりが終わったら初期見積もりが完了
算出したポイント数は89pt

### 初期見積もりの終わり

これまでの経験からチームの出せる開発速度は
一人に2.5pt/week
四人で 10pt/week

### 初期見積もりの終わり

9週間で完了するプロジェクト
...のはずだった

---

### 見積もりの終わり、納期の誕生
見積もりが終わり納期の算出が完了
この「納期」は上層部との約束に使用され、容易に動かせない

---

### 開発の始まり

---

### プロジェクト序盤
仕様追加
仕様誤認
仕様齟齬

---

### 仕様追加
開発開始当初は「不要」とされていたが、時間経過によって「必要」に変じたもの

---

### 仕様誤認
ユーザーストーリーの変換漏れ
仕様に直接書かれていないが、その機能を実装するなら必要となるような機能の見積もりが漏れた
例えば「ユーザーが日記を投稿できるなら、管理者はそれを一覧で見れるようにしないといけない」みたいなもの

---

### 仕様齟齬
「え？それ実装されないってのは聞いてないですけど？」

---

### 仕様齟齬
開発者とPOとで実装対象に対する齟齬

---

### 仕様齟齬
機能Aとほぼ同じものを実装してほしいという仕様書
機能Aは4年かけて徐々に拡張されてきたものなので、全て実装しようとすると工数が莫大になる、必要最低限のものだけ実装する
必要最低限の定義がユーザーストーリーを抽出した人間と、POとで異なる。
開発者「この機能Aに最低限必要な部分はXとYだけ！Zは不要だ！」
PO「実際の運用状況を考えると機能AにはX,Yに加えてZもないとだめ！」

---

### 仕様齟齬

最低限の仕様を残して全部削ぎ落とす過程で削ぎ落とされた。

---

### 仕様追加/仕様齟齬と仕様誤認への予防
仕様書を書いたPOに抽出したユーザーストーリーをレビューしてもらえばこのリスクは低減できた

---

### レビューができなかった理由
従来のやり方とのコンフリクト

---

### どのようなコンフリクトか
従来
仕様書をベースにエンジニアとPOがじっくり細部を詰めていくやり方
今回
仕様を分解したユーザーストーリーをベースにすすめていくやり方

---

### どのようなコンフリクトか
今まで仕様ベースでやり取りしていたところに、ユーザーストーリーベースの概念で実装を進めるように急に方針転換したのが原因

---

### ポイント
従来のやり方を少しでも変える場合、事前に必要な共有を

---

### 発生した齟齬/誤認/追加への対応
プロジェクト内でやることは増えるが、納期は動かせない

---

### 荒ぶる四天王

時間 -> 納期はずらせない
スコープ -> 「必要最低限の機能」なのでこれ以上削れない

「アジャイルサムライ」p.86

---

### 荒ぶる四天王

予算を増加させる = 人員を増やす

---

### 人員を増やすのは悪手？

余裕が少ないプロジェクトにおいて、戦力の逐次投入は下策
新しい人がプロジェクトに入った時に、プロジェクトについて知ってもらうのに時間がかかる
プロジェクトに入った後はサポートが必要
そのサポートに既存の人が入る必要がある
新しい人が開発をこなしてくれるまで時間がかかるので、人を投入しても開発スピードはすぐ上がらない

---

### 人員を増やすのは悪手？
なぜやったか？
運よく前述のコストを踏み倒せた
新メンバはこのプロジェクトの経験者、プロジェクト参戦直後から開発スピードを押し上げてしてくれた
サポートもそこまで必要なかった

---

### 人員を増やすのは悪手？
今回は運良く人を増やすことで対応できたが、それができないときは他3つ(品質,時間,スコープ)のいずれかを犠牲にせざるを得ない

---

### 事後対応
仕様齟齬、仕様誤認が発生していないかの検証を行う。

---

### 事後対応
ユーザーストーリーが仕様を分解したものである、ということを共有
ユーザーストーリーが仕様を充足しているかをレビューしてもらう

---

### 事後対応
ユーザーストーリーと、その分解元の仕様との関連を明示してレビューしてもらう
今回、ユーザーストーリーはBacklogのチケットで管理していた、チケットに仕様書へのリンクを追加。
どのユーザーストーリーがどの仕様を分解したものなのか、チケットを見ればわかるようにして、レビューしてもらった

---

### ポイント
ユーザーストーリーを分解したときは
仕様を充足しているかを「必ず」レビューしてもらおう
細部まで含めた完璧な仕様はPOの頭の中にしか無い
開発者がそれを正確に読み取ることは難しい

---

### プロジェクト中盤
仕様変更

---

### 仕様変更
仕様書自体の間違いがあり、それを修正する必要が出てくる
データ構造を修正しなくてはならなくなった
仕様変更前のデータ構造を前提に多くの機能を作り込んでいた
作り込んだ機能の修正も必要
最も大きな追加工数となった

---

### 対応

プロジェクトでやることは増えるが、納期は動かせない

---

### 荒ぶる四天王


時間を伸ばす = 納期を後ろにずらす

「アジャイルサムライ」p.86

---

### 動かせなかったはずでは？

POが上層部と掛け合ってなんとかしてくれました

必須機能の修正もあるので、スコープの調整が難しい
これ以上人を増やすのは無理
品質を落とすのはもっとダメ
上記の理由から工夫の余地がないため、納期をずらすことになった

---

### 対策

重要機能の仕様変更は影響甚大
既存機能に関わる場所だと、影響回避は難しい
納期やスコープの調整でなんとかしたい

---

### 開発終了
最終的に見積もられたプロジェクト規模は
136pt
となった

---

### プロジェクトのポイントの履歴


---

### まとめ

プロジェクトで遭遇したいくつかの事例について共有
皆様のどこかでの一助となれば幸いです

荒ぶる四天王の主に予算、時間、スコープをなんとかいじって切り抜けよう

